generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Blog {
  id                 String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title              String
  slug               String      @unique
  excerpt            String?
  content            String
  coverImage         String?
  status             BlogStatus  @default(DRAFT)
  metaTitle          String?
  metaDescription    String?
  metaKeywords       String?
  publishedAt        DateTime?   @db.Timestamptz(6)
  scheduledPublishAt DateTime?   @db.Timestamptz(6)
  createdAt          DateTime    @default(now()) @db.Timestamptz(6)
  updatedAt          DateTime    @updatedAt @db.Timestamptz(6)
  
  // Author relationship
  authorId           String      @db.Uuid
  author             User        @relation(fields: [authorId], references: [id])
}

model User {
  id            String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email         String   @unique
  username      String   @unique
  password      String
  role          String   @default("user")
  firstName     String?
  lastName      String?
  isActive      Boolean  @default(true)
  emailVerified Boolean  @default(false)
  createdAt     DateTime @default(now()) @db.Timestamptz(6)
  updatedAt     DateTime @updatedAt @db.Timestamptz(6)
  
  // Blog relationship
  blogs         Blog[]
}

enum BlogStatus {
  DRAFT
  PUBLISHED
  SCHEDULED
  ARCHIVED
} 
